import React, { useState } from "react";
import { NavLink } from "react-router-dom";
import { useCart } from "../../context/CartContext";
import "./Navigation.css";

const Navigation = ({ toggleLogin, toggleCart }) => {
  const { getTotalItems } = useCart();
  const cartItemsCount = getTotalItems();
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  const toggleMobileMenu = () => {
    setIsMobileMenuOpen(!isMobileMenuOpen);
  };

  const closeMobileMenu = () => {
    setIsMobileMenuOpen(false);
  };

  return (
    <nav className="navigation">
      <ul className={isMobileMenuOpen ? "show" : ""}>
        <li>
          <NavLink to="/" onClick={closeMobileMenu}>
            Главная
          </NavLink>
        </li>
        <li>
          <NavLink to="/catalog" onClick={closeMobileMenu}>
            Каталог
          </NavLink>
        </li>
        <li>
          <NavLink to="/contacts" onClick={closeMobileMenu}>
            Контакты
          </NavLink>
        </li>
        <li>
          <NavLink to="/delivery-payment" onClick={closeMobileMenu}>
            Доставка
          </NavLink>
        </li>
      </ul>

      <button className="mobile-menu-toggle" onClick={toggleMobileMenu}>
        ☰
      </button>

      <div className="icons">
        <div className="icon" onClick={toggleLogin}>
          <svg width="24" height="22" viewBox="0 0 41 37" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M24.8637 19.8308C24.8637 18.8853 25.5897 18.1189 26.4854 18.1189C27.3811 18.1189 28.1072 18.8853 28.1072 19.8308C28.1072 20.7762 27.3811 21.5427 26.4854 21.5427C25.5897 21.5427 24.8637 20.7762 24.8637 19.8308Z" fill="currentColor"/>
            <path d="M16.1363 19.8308C16.1363 18.8853 15.4103 18.1189 14.5146 18.1189C13.6189 18.1189 12.8928 18.8853 12.8928 19.8308C12.8928 20.7762 13.6189 21.5427 14.5146 21.5427C15.4103 21.5427 16.1363 20.7762 16.1363 19.8308Z" fill="currentColor"/>
            <path d="M29.8496 14.7183C30.2229 15.1433 30.4893 15.5065 30.6914 15.8364C32.9864 15.3425 34.2404 14.6158 35.3896 12.6703C36.2159 11.2713 35.7035 10.0196 35.3879 9.3587C34.9198 8.37823 34.4116 7.90932 33.506 7.36896C32.5221 6.78184 31.0059 6.7063 30.6808 6.7063C29.739 6.7063 28.4833 6.7063 27.5416 8.36297C27.1648 9.02563 27.0986 10.8134 28.0396 13.1328C28.8461 13.5969 29.3281 14.1245 29.8496 14.7183Z" fill="currentColor"/>
            <path d="M10.3086 15.8364C10.5107 15.5065 10.7771 15.1433 11.1504 14.7183C11.6719 14.1245 12.1539 13.5969 12.9604 13.1328C13.9014 10.8134 13.8352 9.02563 13.4585 8.36297C12.5167 6.7063 11.261 6.7063 10.3193 6.7063C9.99405 6.7063 8.47786 6.78184 7.49397 7.36896C6.58843 7.90932 6.08025 8.37823 5.6121 9.3587C5.29653 10.0196 4.78409 11.2713 5.61045 12.6703C6.75963 14.6158 8.01365 15.3425 10.3086 15.8364Z" fill="currentColor"/>
            <path d="M18.2987 33.5259C18.2987 33.1952 17.9225 32.9994 17.6482 33.1841C17.5916 33.2223 17.534 33.261 17.4754 33.3003C16.1115 34.216 15.0391 34.8888 12.8928 34.8629C18.8393 36.379 22.0828 36.379 28.1072 34.8629C25.9609 34.8888 24.8885 34.216 23.5246 33.3003C23.4537 33.2527 23.384 33.206 23.3155 33.1601C23.023 32.9639 22.6234 33.1737 22.6234 33.5259C22.6234 34.1562 22.1393 34.6672 21.5422 34.6672H20.461H19.3798C18.7827 34.6672 18.2987 34.1562 18.2987 33.5259Z" fill="currentColor"/>
            <path d="M17.4754 33.3003C18.8393 32.3846 19.6649 31.814 20.461 30.3662M17.4754 33.3003C16.1115 34.216 15.0391 34.8888 12.8928 34.8629M17.4754 33.3003C17.534 33.261 17.5916 33.2223 17.6482 33.1841C17.9225 32.9994 18.2987 33.1952 18.2987 33.5259V33.5259C18.2987 34.1562 18.7827 34.6672 19.3798 34.6672H20.461M15.0081 12.4126C17.1187 11.9669 20.461 11.8613 20.461 11.8613C20.461 11.8613 23.8813 11.9669 25.9919 12.4126M15.0081 12.4126C14.2085 12.6939 13.7005 12.707 12.9604 13.1328M15.0081 12.4126C16.6285 8.41819 15.6554 4.99441 15.0067 3.85315C13.385 1 11.2226 1 9.60088 1C9.04087 1 6.42993 1.1301 4.73562 2.14125C3.17625 3.07187 2.30114 3.87944 1.49497 5.56803C0.951541 6.7063 0.72901 8.41819 1.49212 11.2713C2.50845 15.0713 5.10833 17.839 9.0603 18.6895M11.1504 14.7183C9.64934 16.4273 9.87652 17.1387 9.0603 18.6895M11.1504 14.7183C11.6719 14.1245 12.1539 13.5969 12.9604 13.1328M11.1504 14.7183C10.7771 15.1433 10.5107 15.5065 10.3086 15.8364C8.01365 15.3425 6.75963 14.6158 5.61045 12.6703C4.78409 11.2713 5.29653 10.0196 5.6121 9.3587C6.08025 8.37823 6.58843 7.90932 7.49397 7.36896C8.47786 6.78184 9.99405 6.7063 10.3193 6.7063C11.261 6.7063 12.5167 6.7063 13.4585 8.36297C13.8352 9.02563 13.9014 10.8134 12.9604 13.1328M9.0603 18.6895C7.99985 21.1587 7.09161 22.4184 6.34486 25.0123C5.86525 26.6783 5.94276 28.3477 5.94276 28.3477L6.12683 29.4631C6.38801 31.0457 7.13704 32.2952 8.55367 33.3003C10.1649 34.4435 11.6251 34.8475 12.8928 34.8629M20.461 28.2961C20.461 28.2961 19.3798 28.3902 18.8393 26.1077C18.2987 23.8252 20.461 23.8358 20.461 23.8358C20.461 23.8358 22.7013 23.8252 22.1607 26.1077C21.6202 28.3902 20.461 28.2961 20.461 28.2961ZM20.461 28.2961V30.3662M20.461 30.3662C21.2571 31.814 22.1607 32.3846 23.5246 33.3003M20.461 30.3662V34.6672M12.8928 34.8629C18.8393 36.379 22.0828 36.379 28.1072 34.8629M23.5246 33.3003C24.8885 34.216 25.9609 34.8888 28.1072 34.8629M23.5246 33.3003C23.4537 33.2527 23.384 33.206 23.3155 33.1601C23.023 32.9639 22.6233 33.1737 22.6233 33.5259V33.5259C22.6233 34.1562 22.1393 34.6672 21.5422 34.6672H20.461M25.9919 12.4126C26.7915 12.6939 27.2995 12.707 28.0396 13.1328M25.9919 12.4126C24.3715 8.41819 25.3446 4.99441 25.9933 3.85315C27.615 1 29.7774 1 31.3991 1C31.9591 1 34.5701 1.1301 36.2644 2.14125C37.8237 3.07187 38.6989 3.87944 39.505 5.56803C40.0485 6.7063 40.271 8.41819 39.5079 11.2713C38.4915 15.0713 35.8917 17.839 31.9397 18.6895M29.8496 14.7183C31.3507 16.4273 31.1235 17.1387 31.9397 18.6895M29.8496 14.7183C29.3281 14.1245 28.8461 13.5969 28.0396 13.1328M29.8496 14.7183C30.2229 15.1433 30.4893 15.5065 30.6914 15.8364C32.9864 15.3425 34.2404 14.6158 35.3896 12.6703C36.2159 11.2713 35.7035 10.0196 35.3879 9.3587C34.9198 8.37823 34.4116 7.90932 33.506 7.36896C32.5221 6.78184 31.0059 6.7063 30.6808 6.7063C29.739 6.7063 28.4833 6.7063 27.5416 8.36297C27.1648 9.02563 27.0986 10.8134 28.0396 13.1328M31.9397 18.6895C33.0002 21.1587 33.9084 22.4184 34.6551 25.0123C35.1347 26.6783 35.0572 28.3477 35.0572 28.3477L34.8732 29.4631C34.612 31.0457 33.863 32.2952 32.4463 33.3003C30.8351 34.4435 29.3749 34.8475 28.1072 34.8629M16.1363 19.8308C16.1363 18.8853 15.4103 18.1189 14.5146 18.1189C13.6189 18.1189 12.8928 18.8853 12.8928 19.8308C12.8928 20.7762 13.6189 21.5427 14.5146 21.5427C15.4103 21.5427 16.1363 20.7762 16.1363 19.8308ZM24.8637 19.8308C24.8637 18.8853 25.5897 18.1189 26.4854 18.1189C27.3811 18.1189 28.1072 18.8853 28.1072 19.8308C28.1072 20.7762 27.3811 21.5427 26.4854 21.5427C25.5897 21.5427 24.8637 20.7762 24.8637 19.8308Z" stroke="currentColor" strokeWidth="1.2"/>
          </svg>
        </div>
        <div className="icon" onClick={toggleCart}>
          <svg width="24" height="19" viewBox="0 0 40 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M38.1087 1C36.1031 1 28.9263 2.04631 28.2961 6.23155C28.6835 6.25427 29.0379 6.28089 29.3547 6.31179C31.0893 3.9 33.0949 2.93333 36.1031 1.96667C39.1114 1 37.1059 1 37.1059 3.9C37.1059 6.8 38.1087 5.83333 38.1087 5.83333C38.1087 5.83333 40.1142 1 38.1087 1Z" fill="currentColor"/>
            <path d="M24.07 26.1333C22.0645 26.1333 22.0645 27.4222 22.0645 28.0667C22.0645 29.6133 23.4015 30 24.07 30C25.6744 30 26.0755 28.7111 26.0755 28.0667C26.0755 26.52 24.7385 26.1333 24.07 26.1333Z" fill="currentColor"/>
            <path d="M12.0369 26.1386C10.4325 26.1386 10.205 27.4222 10.205 28.0667C10.205 29.6133 11.542 30 12.2105 30C13.815 30 14.0424 28.7163 14.0424 28.0719C14.0424 26.5252 12.7054 26.1386 12.0369 26.1386Z" fill="currentColor"/>
            <path d="M2.40327 12.8619C14.4364 11.8953 18.9346 12.6 30.6827 12.6M4.01483 18.4C16.0479 17.4333 18.2559 18.4 30.0039 18.4M8.02536 6.41737C5.87371 6.47584 1.19303 6.41736 1.00605 6.80001C0.81906 7.18266 5.01658 24.2001 7.0226 24.2C9.02863 24.2 10.8389 23.9172 12.2105 23.8512M8.02536 6.41737C11.0336 13.5667 10.5761 17.0429 12.2105 23.8512M8.02536 6.41737C13.8567 6.25889 23.5494 5.95312 28.2961 6.23155M12.2105 23.8512C18.5448 23.5469 26.0755 24.2 28.0806 24.2C30.0856 24.2001 31.0888 7.88808 31.0888 6.80001C31.0888 6.57555 30.4456 6.41823 29.3547 6.31179M15.0452 6.23155C18.0535 13.3809 16.5927 17.0429 18.2271 23.8513M22.5344 6.11968C25.5427 13.269 22.6272 17.2222 24.2616 24.0305M28.2961 6.23155C28.9263 2.04631 36.1031 1 38.1087 1C40.1142 1 38.1087 5.83333 38.1087 5.83333C38.1087 5.83333 37.1059 6.8 37.1059 3.9C37.1059 1 39.1114 1 36.1031 1.96667C33.0949 2.93333 31.0893 3.9 29.3547 6.31179M28.2961 6.23155C28.6835 6.25427 29.0379 6.28089 29.3547 6.31179M12.0369 26.1386C10.4325 26.1386 10.205 27.4222 10.205 28.0667C10.205 29.6133 11.542 30 12.2105 30C13.815 30 14.0424 28.7163 14.0424 28.0719C14.0424 26.5252 12.7054 26.1386 12.0369 26.1386ZM24.07 26.1333C22.0645 26.1333 22.0645 27.4222 22.0645 28.0667C22.0645 29.6133 23.4015 30 24.07 30C25.6744 30 26.0755 28.7111 26.0755 28.0667C26.0755 26.52 24.7385 26.1333 24.07 26.1333Z" stroke="currentColor" strokeWidth="1.5"/>
          </svg>
          {cartItemsCount > 0 && (
            <span className="cart-badge">{cartItemsCount}</span>
          )}
        </div>
      </div>
    </nav>
  );
};

export default Navigation;